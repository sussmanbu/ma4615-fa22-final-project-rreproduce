---
title: Post 2
author: Team Rreproduce
date: '2022-10-21'
slug: []
categories: []
tags: []
description: ~
toc: yes
authors: []
series: []
lastmod: '2022-10-21T13:29:25-04:00'
featuredVideo: ~
featuredImage: ~
---


<div id="TOC">

</div>

<p>##Introduction
This week we tidy the data and use a subset of data for exploratory analysis.</p>
<p>In <a href="/load_and_clean_data.R">load_and_clean_data.R</a>, we made following changes:</p>
<ul>
<li><p>remove all n = 0 entries (there is no one moving between two commute zone) and n = -1 entries (NA value)</p></li>
<li><p>separate the pool variable into race and income</p></li>
<li><p>Use filter function to focus on the population of immigrants moving from Massachusetts</p></li>
<li><p>Change the column names to make them easy to understand</p></li>
<li><p>Change the NA probability to 0 (It was NA because the denominator is 0)</p></li>
</ul>
<div id="our-subset-data-o_ma-is-then-saved-in-the-dataset-file." class="section level2">
<h2>Our subset data o_MA is then saved in the dataset file.</h2>
</div>
<div id="examining-o_ma" class="section level2">
<h2>Examining o_MA</h2>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6      ✔ purrr   0.3.5 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.1      ✔ stringr 1.4.1 
## ✔ readr   2.1.3      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>o_MA &lt;- read_csv(here::here(&quot;dataset/o_MA.csv&quot;))</code></pre>
<pre><code>## Rows: 92625 Columns: 13
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (5): Original_CZ, Original_State, Dest_CZ, Dest_state, race
## dbl (8): Num_original_CZ, Num_dest_CZ, n, From_origin, Live_in_dest, income,...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre class="r"><code>top20 &lt;- o_MA %&gt;% 
  group_by(Dest_state) %&gt;%
  mutate(sum_n = sum(n)) %&gt;%
  filter(Dest_state != &quot;Massachusetts&quot;) %&gt;%
  ungroup() %&gt;%
  arrange(desc(sum_n)) %&gt;%
  filter(sum_n &gt; 1650)</code></pre>
<pre class="r"><code>top20 %&gt;% 
  ggplot() +
  geom_col(aes(x=reorder(Dest_state,sum_n),y=n,fill=race))+
  theme(axis.text.x = element_text(angle=45,vjust=1,hjust=1)) +
  labs(x = &quot;Destination State&quot;, y = &quot;Total Commute Population&quot;, color=&quot;race&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<pre class="r"><code>Boston_in&lt;- o_MA %&gt;%
  filter(Dest_state==&quot;Massachusetts&quot;)%&gt;% filter(Original_CZ==&quot;Boston&quot;)

Boston_in</code></pre>
<pre><code>## # A tibble: 125 × 13
##    Num_ori…¹ Origi…² Origi…³ Num_d…⁴ Dest_CZ Dest_…⁵     n From_…⁶ Live_…⁷ race 
##        &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;
##  1     20500 Boston  Massac…   20500 Boston  Massac…  1592    1942    2083 Asian
##  2     20500 Boston  Massac…   20403 Oak Bl… Massac…     0    1942       2 Asian
##  3     20500 Boston  Massac…   20902 Pittsf… Massac…     1    1942       8 Asian
##  4     20500 Boston  Massac…   20800 Spring… Massac…     5    1942      90 Asian
##  5     20500 Boston  Massac…   20402 Nantuc… Massac…     0    1942       2 Asian
##  6     20500 Boston  Massac…   20403 Oak Bl… Massac…     1    3072       2 Asian
##  7     20500 Boston  Massac…   20800 Spring… Massac…     8    3072     134 Asian
##  8     20500 Boston  Massac…   20402 Nantuc… Massac…     0    3072       1 Asian
##  9     20500 Boston  Massac…   20500 Boston  Massac…  2540    3072    3202 Asian
## 10     20500 Boston  Massac…   20902 Pittsf… Massac…     1    3072      27 Asian
## # … with 115 more rows, 3 more variables: income &lt;dbl&gt;, pr_d_o &lt;dbl&gt;,
## #   pr_o_d &lt;dbl&gt;, and abbreviated variable names ¹​Num_original_CZ,
## #   ²​Original_CZ, ³​Original_State, ⁴​Num_dest_CZ, ⁵​Dest_state, ⁶​From_origin,
## #   ⁷​Live_in_dest</code></pre>
<pre class="r"><code>ggplot(Boston_in)+geom_bar(aes(x = Dest_CZ,fill=Dest_CZ))+
  coord_polar(theta=&#39;x&#39;)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
